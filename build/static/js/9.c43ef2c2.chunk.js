(this["webpackJsonpdar-bengacem-admin"]=this["webpackJsonpdar-bengacem-admin"]||[]).push([[9],{125:function(e,t,s){"use strict";var a=s(111);const n={updateEvent:async(e,t)=>a.a.put("/events/".concat(e),t),addEvent:async e=>a.a.post("/events/",e),deleteEvent:async e=>a.a.delete("/events/".concat(e)),getAllEvents:async()=>a.a.get("/events/"),getEventById:async e=>a.a.get("/events/".concat(e)),publishEvent:async(e,t)=>a.a.put("/events/publish/".concat(e),t)};t.a=n},143:function(e,t,s){e.exports=function(){"use strict";var e=1e3,t=6e4,s=36e5,a="millisecond",n="second",i="minute",r="hour",c="day",l="week",d="month",o="quarter",u="year",h="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],s=e%100;return"["+e+(t[(s-20)%10]||t[s]||t[0])+"]"}},p=function(e,t,s){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(s)+e},j={s:p,z:function(e){var t=-e.utcOffset(),s=Math.abs(t),a=Math.floor(s/60),n=s%60;return(t<=0?"+":"-")+p(a,2,"0")+":"+p(n,2,"0")},m:function e(t,s){if(t.date()<s.date())return-e(s,t);var a=12*(s.year()-t.year())+(s.month()-t.month()),n=t.clone().add(a,d),i=s-n<0,r=t.clone().add(a+(i?-1:1),d);return+(-(a+(s-n)/(i?n-r:r-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:u,w:l,d:c,D:h,h:r,m:i,s:n,ms:a,Q:o}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",x={};x[v]=f;var O=function(e){return e instanceof S},y=function e(t,s,a){var n;if(!t)return v;if("string"==typeof t){var i=t.toLowerCase();x[i]&&(n=i),s&&(x[i]=s,n=i);var r=t.split("-");if(!n&&r.length>1)return e(r[0])}else{var c=t.name;x[c]=t,n=c}return!a&&n&&(v=n),n||!a&&v},$=function(e,t){if(O(e))return e.clone();var s="object"==typeof t?t:{};return s.date=e,s.args=arguments,new S(s)},D=j;D.l=y,D.i=O,D.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function f(e){this.$L=y(e.locale,null,!0),this.parse(e)}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,s=e.utc;if(null===t)return new Date(NaN);if(D.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(m);if(a){var n=a[2]-1||0,i=(a[7]||"0").substring(0,3);return s?new Date(Date.UTC(a[1],n,a[3]||1,a[4]||0,a[5]||0,a[6]||0,i)):new Date(a[1],n,a[3]||1,a[4]||0,a[5]||0,a[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return D},p.isValid=function(){return!(this.$d.toString()===g)},p.isSame=function(e,t){var s=$(e);return this.startOf(t)<=s&&s<=this.endOf(t)},p.isAfter=function(e,t){return $(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<$(e)},p.$g=function(e,t,s){return D.u(e)?this[t]:this.set(s,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,t){var s=this,a=!!D.u(t)||t,o=D.p(e),g=function(e,t){var n=D.w(s.$u?Date.UTC(s.$y,t,e):new Date(s.$y,t,e),s);return a?n:n.endOf(c)},m=function(e,t){return D.w(s.toDate()[e].apply(s.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(t)),s)},b=this.$W,f=this.$M,p=this.$D,j="set"+(this.$u?"UTC":"");switch(o){case u:return a?g(1,0):g(31,11);case d:return a?g(1,f):g(0,f+1);case l:var v=this.$locale().weekStart||0,x=(b<v?b+7:b)-v;return g(a?p-x:p+(6-x),f);case c:case h:return m(j+"Hours",0);case r:return m(j+"Minutes",1);case i:return m(j+"Seconds",2);case n:return m(j+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(e,t){var s,l=D.p(e),o="set"+(this.$u?"UTC":""),g=(s={},s[c]=o+"Date",s[h]=o+"Date",s[d]=o+"Month",s[u]=o+"FullYear",s[r]=o+"Hours",s[i]=o+"Minutes",s[n]=o+"Seconds",s[a]=o+"Milliseconds",s)[l],m=l===c?this.$D+(t-this.$W):t;if(l===d||l===u){var b=this.clone().set(h,1);b.$d[g](m),b.init(),this.$d=b.set(h,Math.min(this.$D,b.daysInMonth())).$d}else g&&this.$d[g](m);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[D.p(e)]()},p.add=function(a,o){var h,g=this;a=Number(a);var m=D.p(o),b=function(e){var t=$(g);return D.w(t.date(t.date()+Math.round(e*a)),g)};if(m===d)return this.set(d,this.$M+a);if(m===u)return this.set(u,this.$y+a);if(m===c)return b(1);if(m===l)return b(7);var f=(h={},h[i]=t,h[r]=s,h[n]=e,h)[m]||1,p=this.$d.getTime()+a*f;return D.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,s=this.$locale();if(!this.isValid())return s.invalidDate||g;var a=e||"YYYY-MM-DDTHH:mm:ssZ",n=D.z(this),i=this.$H,r=this.$m,c=this.$M,l=s.weekdays,d=s.months,o=function(e,s,n,i){return e&&(e[s]||e(t,a))||n[s].slice(0,i)},u=function(e){return D.s(i%12||12,e,"0")},h=s.meridiem||function(e,t,s){var a=e<12?"AM":"PM";return s?a.toLowerCase():a},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:D.s(c+1,2,"0"),MMM:o(s.monthsShort,c,d,3),MMMM:o(d,c),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:o(s.weekdaysMin,this.$W,l,2),ddd:o(s.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(i),HH:D.s(i,2,"0"),h:u(1),hh:u(2),a:h(i,r,!0),A:h(i,r,!1),m:String(r),mm:D.s(r,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:n};return a.replace(b,(function(e,t){return t||m[e]||n.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(a,h,g){var m,b=D.p(h),f=$(a),p=(f.utcOffset()-this.utcOffset())*t,j=this-f,v=D.m(this,f);return v=(m={},m[u]=v/12,m[d]=v,m[o]=v/3,m[l]=(j-p)/6048e5,m[c]=(j-p)/864e5,m[r]=j/s,m[i]=j/t,m[n]=j/e,m)[b]||j,g?v:D.a(v)},p.daysInMonth=function(){return this.endOf(d).$D},p.$locale=function(){return x[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var s=this.clone(),a=y(e,t,!0);return a&&(s.$L=a),s},p.clone=function(){return D.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),w=S.prototype;return $.prototype=w,[["$ms",a],["$s",n],["$m",i],["$H",r],["$W",c],["$M",d],["$y",u],["$D",h]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),$.extend=function(e,t){return e.$i||(e(t,S,$),e.$i=!0),$},$.locale=y,$.isDayjs=O,$.unix=function(e){return $(1e3*e)},$.en=x[v],$.Ls=x,$.p={},$}()},198:function(e,t,s){"use strict";var a=s(35),n=s(199),i=s(128),r=s(146),c=s(129),l=s(163),d=s(164),o=s(165),u=s(251),h=s(0),g=s(160),m=s(36),b=s(125),f=s(37),p=s(143),j=s.n(p);var v=(e,t)=>{const{isDrawerOpen:s,closeDrawer:a,setIsUpdate:n,lang:i}=Object(h.useContext)(m.a),[r,c]=Object(h.useState)({}),[l,d]=Object(h.useState)(""),[o,u]=Object(h.useState)(""),[p,v]=Object(h.useState)(""),[x,O]=Object(h.useState)([]),[y,$]=Object(h.useState)([]),[D,S]=Object(h.useState)(i),[w,N]=Object(h.useState)(!0),[M,k]=Object(h.useState)(""),[E,Y]=Object(h.useState)(!1),{register:_,handleSubmit:I,setValue:C,clearErrors:T,reset:F,formState:{errors:H}}=Object(g.a)();return Object(h.useEffect)((()=>{var a;if(!s)return c({}),C("title"),C("description"),C("startDate"),C("numberOfDays"),C("location"),u(""),v(""),O([]),N(!0),T("title"),T("description"),T("startDate"),T("numberOfDays"),T("location"),S(i),C("language",D),void(void 0!==t&&void 0!==(null===(a=t[0])||void 0===a?void 0:a._id)&&d(t[0]._id));e&&(async()=>{try{const t=await b.a.getEventById(e);t&&(C("title",t.data.title),C("description",t.data.description),C("startDate",j()(t.data.startDate).format("YYYY-MM-DD HH:mm")),C("location",t.data.location),C("numberOfDays",t.data.numberOfDays),u("https://api.darbengacem.com/uploads/"+t.data.image),N(t.data.isPublished))}catch(t){Object(f.b)(t?t.response.data.message:t.message)}})()}),[e,C,s,D,T,t,i]),{register:_,handleSubmit:I,onSubmit:async t=>{const{title:s,description:i,startDate:r,location:c,isPublished:l}=t,d=new FormData;if(d.append("title",s),d.append("startDate",r),d.append("description",i),d.append("image",p),d.append("location",c),d.append("isPublished",w),console.log(i),e){!0===(await b.a.updateEvent(e,d)).success&&Object(f.c)("Event updated successfully!"),n(!0),Y(!1),a(),F()}else{!0===(await b.a.addEvent(d)).success&&Object(f.c)("Event added successfully!"),n(!0),Y(!1),a()}},errors:H,imageUrl:o,setImageUrl:u,children:y,setChildren:$,published:w,setPublished:N,checked:l,setChecked:d,isSubmitting:E,selectCategoryName:M,setSelectCategoryName:k,handleSelectLanguage:e=>{S(e),Object.keys(r).length>0&&(C("name",r.name[e||"en"]),C("description",r.description[e||"en"]))},imageFile:p,setImageFile:v,files:x,setFiles:O}},x=(s(196),s(161)),O=s.n(x),y=s(86),$=(s(123),s(162),s(1));t.a=e=>{let{id:t,data:s,lang:h}=e;const{t:g}=Object(y.a)(),{checked:m,register:b,onSubmit:f,handleSubmit:p,errors:j,imageUrl:x,setImageUrl:D,published:S,setPublished:w,setChecked:N,selectCategoryName:M,setSelectCategoryName:k,handleSelectLanguage:E,isSubmitting:Y,imageFile:_,setImageFile:I,files:C,setFiles:T}=v(t,s);return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:t?Object($.jsx)(o.a,{register:b,handleSelectLanguage:E,title:"Update Event",description:"Update event details with the form below"}):Object($.jsx)(o.a,{register:b,handleSelectLanguage:E,title:"Add Event",description:"Add event post by filling the form below"})}),Object($.jsx)(O.a,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:Object($.jsxs)("form",{onSubmit:p(f),children:[Object($.jsxs)("div",{className:"p-6 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[Object($.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object($.jsx)(c.a,{label:"Title"}),Object($.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object($.jsx)(r.a,{register:b,label:"Event title",name:"title",type:"text",placeholder:"Event Title"}),Object($.jsx)(i.a,{errorName:j.title})]})]}),Object($.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object($.jsx)(c.a,{label:"Location"}),Object($.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object($.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object($.jsx)(r.a,{register:b,label:"Event location",name:"location",type:"text",placeholder:"Event location"}),Object($.jsx)(i.a,{errorName:j.location})]})})]}),Object($.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object($.jsx)(c.a,{label:"Start Date"}),Object($.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object($.jsx)(a.Input,{...b("startDate",{required:"Event Date required"}),label:"Event Start Time",name:"startDate",type:"datetime-local",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),Object($.jsx)(i.a,{errorName:j.startDate})]})]}),Object($.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object($.jsx)(c.a,{label:"Description"}),Object($.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object($.jsx)(d.a,{...b("description",{required:"Event description required"}),register:b,label:"Description",name:"description",type:"text",placeholder:"Event Description"}),Object($.jsx)(i.a,{errorName:j.description})]})]}),Object($.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object($.jsx)(c.a,{label:"Image"}),Object($.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object($.jsx)(u.a,{imageUrl:x,setImageUrl:D,folder:"category",imageFile:_,setImageFile:I,files:C,setFiles:T})})]}),Object($.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object($.jsx)(c.a,{label:"Published"}),Object($.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object($.jsx)(l.a,{handleProcess:w,processOption:S})})]})]}),Object($.jsx)(n.a,{id:t,title:"Event",isSubmitting:Y})]})})]})}},776:function(e,t,s){"use strict";s.r(t);s(0);var a=s(86),n=s(3),i=s(126),r=s(198),c=s(383),l=s(187),d=s(140),o=s(124),u=s(125),h=s(143),g=s.n(h),m=s(1);t.default=()=>{var e,t,s,h,b,f;const{id:p}=Object(n.i)(),{t:j}=Object(a.a)(),{handleUpdate:v}=Object(o.a)(),{data:x,loading:O}=Object(d.a)((()=>u.a.getEventById(p)));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(i.a,{product:!0,children:Object(m.jsx)(r.a,{id:p})}),Object(m.jsx)(l.a,{children:"Event details"}),O?Object(m.jsx)(c.a,{loading:O}):Object(m.jsx)("div",{className:"inline-block overflow-y-auto h-full w-full align-middle transition-all transform",children:Object(m.jsxs)("div",{className:"flex flex-col  lg:flex-row md:flex-row w-full overflow-hidden ",children:[Object(m.jsxs)("div",{className:"w-full",children:[Object(m.jsx)("div",{className:"flex-shrink-0 flex lg:w-7/12 items-center justify-center h-auto ",children:Object(m.jsx)("img",{src:"https://api.darbengacem.com/uploads/"+x.data.image,alt:null===x||void 0===x||null===(e=x.data)||void 0===e?void 0:e.title})}),Object(m.jsx)("p",{className:"text-base leading-6 text-gray-500 dark:text-gray-400 md:leading-7 pt-20",children:null===x||void 0===x||null===(t=x.data)||void 0===t||null===(s=t.description)||void 0===s?void 0:s.split(/\r?\n/).map(((e,t)=>Object(m.jsx)("li",{children:Object(m.jsx)("span",{className:"text-gray-700 dark:text-gray-400",children:e})},t)))})]}),Object(m.jsxs)("div",{className:"w-full flex flex-col p-5 md:p-8 text-left",children:[Object(m.jsxs)("div",{className:"mb-5 block ",children:[Object(m.jsx)("div",{className:"font-serif font-semibold py-1 text-sm",children:Object(m.jsxs)("p",{className:"text-sm text-gray-500 pr-4 dark:text-gray-400",children:["Status:"," ",x.data.isPublished?Object(m.jsx)("span",{className:"text-green-400",children:"This event is published"}):Object(m.jsxs)("span",{className:"text-red-400",children:[" ","This event is not published"]})]})}),Object(m.jsx)("h2",{className:"text-heading text-lg md:text-xl lg:text-2xl font-semibold font-serif dark:text-gray-400",children:null===x||void 0===x||null===(h=x.data)||void 0===h?void 0:h.title}),Object(m.jsxs)("div",{className:"pt-10 dark:text-gray-400",children:[Object(m.jsx)("span",{className:"font-semibold text-lg ",children:"Start Date: "})," ",g()(null===x||void 0===x||null===(b=x.data)||void 0===b?void 0:b.startDate).format("MM/D/YYYY HH:mm")]}),Object(m.jsxs)("div",{className:"pt-2",children:[Object(m.jsx)("span",{className:"font-semibold text-lg",children:"Location:"})," ",null===x||void 0===x||null===(f=x.data)||void 0===f?void 0:f.location]})]}),Object(m.jsx)("div",{className:"mt-4",children:Object(m.jsx)("button",{onClick:()=>v(p),className:"cursor-pointer leading-5 transition-colors duration-150 font-medium text-sm focus:outline-none px-5 py-2 rounded-md text-white bg-green-500 border border-transparent active:bg-green-600 hover:bg-green-600 focus:ring focus:ring-purple-300",children:"Edit Event"})})]})]})})]})}}}]);
//# sourceMappingURL=9.c43ef2c2.chunk.js.map