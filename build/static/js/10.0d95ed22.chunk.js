(this["webpackJsonpdar-bengacem-admin"]=this["webpackJsonpdar-bengacem-admin"]||[]).push([[10],{198:function(e,t,a){"use strict";var n=a(35),r=a(199),c=a(128),l=a(146),s=a(129),i=a(163),o=a(164),d=a(165),u=a(251),b=a(0),j=a(160),m=a(36),p=a(125),g=a(37),h=a(143),v=a.n(h);var x=(e,t)=>{const{isDrawerOpen:a,closeDrawer:n,setIsUpdate:r,lang:c}=Object(b.useContext)(m.a),[l,s]=Object(b.useState)({}),[i,o]=Object(b.useState)(""),[d,u]=Object(b.useState)(""),[h,x]=Object(b.useState)(""),[f,O]=Object(b.useState)([]),[y,w]=Object(b.useState)([]),[N,C]=Object(b.useState)(c),[S,U]=Object(b.useState)(!0),[E,D]=Object(b.useState)(""),[I,k]=Object(b.useState)(!1),{register:T,handleSubmit:R,setValue:P,clearErrors:L,reset:F,formState:{errors:B}}=Object(j.a)();return Object(b.useEffect)((()=>{var n;if(!a)return s({}),P("title"),P("description"),P("startDate"),P("numberOfDays"),P("location"),u(""),x(""),O([]),U(!0),L("title"),L("description"),L("startDate"),L("numberOfDays"),L("location"),C(c),P("language",N),void(void 0!==t&&void 0!==(null===(n=t[0])||void 0===n?void 0:n._id)&&o(t[0]._id));e&&(async()=>{try{const t=await p.a.getEventById(e);t&&(P("title",t.data.title),P("description",t.data.description),P("startDate",v()(t.data.startDate).format("YYYY-MM-DD HH:mm")),P("location",t.data.location),P("numberOfDays",t.data.numberOfDays),u("https://api.darbengacem.com/uploads/"+t.data.image),U(t.data.isPublished))}catch(t){Object(g.b)(t?t.response.data.message:t.message)}})()}),[e,P,a,N,L,t,c]),{register:T,handleSubmit:R,onSubmit:async t=>{const{title:a,description:c,startDate:l,location:s,isPublished:i}=t,o=new FormData;if(o.append("title",a),o.append("startDate",l),o.append("description",c),o.append("image",h),o.append("location",s),o.append("isPublished",S),console.log(c),e){!0===(await p.a.updateEvent(e,o)).success&&Object(g.c)("Event updated successfully!"),r(!0),k(!1),n(),F()}else{!0===(await p.a.addEvent(o)).success&&Object(g.c)("Event added successfully!"),r(!0),k(!1),n()}},errors:B,imageUrl:d,setImageUrl:u,children:y,setChildren:w,published:S,setPublished:U,checked:i,setChecked:o,isSubmitting:I,selectCategoryName:E,setSelectCategoryName:D,handleSelectLanguage:e=>{C(e),Object.keys(l).length>0&&(P("name",l.name[e||"en"]),P("description",l.description[e||"en"]))},imageFile:h,setImageFile:x,files:f,setFiles:O}},f=(a(196),a(161)),O=a.n(f),y=a(86),w=(a(123),a(162),a(1));t.a=e=>{let{id:t,data:a,lang:b}=e;const{t:j}=Object(y.a)(),{checked:m,register:p,onSubmit:g,handleSubmit:h,errors:v,imageUrl:f,setImageUrl:N,published:C,setPublished:S,setChecked:U,selectCategoryName:E,setSelectCategoryName:D,handleSelectLanguage:I,isSubmitting:k,imageFile:T,setImageFile:R,files:P,setFiles:L}=x(t,a);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:t?Object(w.jsx)(d.a,{register:p,handleSelectLanguage:I,title:"Update Event",description:"Update event details with the form below"}):Object(w.jsx)(d.a,{register:p,handleSelectLanguage:I,title:"Add Event",description:"Add event post by filling the form below"})}),Object(w.jsx)(O.a,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:Object(w.jsxs)("form",{onSubmit:h(g),children:[Object(w.jsxs)("div",{className:"p-6 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[Object(w.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(w.jsx)(s.a,{label:"Title"}),Object(w.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(w.jsx)(l.a,{register:p,label:"Event title",name:"title",type:"text",placeholder:"Event Title"}),Object(w.jsx)(c.a,{errorName:v.title})]})]}),Object(w.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(w.jsx)(s.a,{label:"Location"}),Object(w.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object(w.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(w.jsx)(l.a,{register:p,label:"Event location",name:"location",type:"text",placeholder:"Event location"}),Object(w.jsx)(c.a,{errorName:v.location})]})})]}),Object(w.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(w.jsx)(s.a,{label:"Start Date"}),Object(w.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(w.jsx)(n.Input,{...p("startDate",{required:"Event Date required"}),label:"Event Start Time",name:"startDate",type:"datetime-local",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),Object(w.jsx)(c.a,{errorName:v.startDate})]})]}),Object(w.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(w.jsx)(s.a,{label:"Description"}),Object(w.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(w.jsx)(o.a,{...p("description",{required:"Event description required"}),register:p,label:"Description",name:"description",type:"text",placeholder:"Event Description"}),Object(w.jsx)(c.a,{errorName:v.description})]})]}),Object(w.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(w.jsx)(s.a,{label:"Image"}),Object(w.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object(w.jsx)(u.a,{imageUrl:f,setImageUrl:N,folder:"category",imageFile:T,setImageFile:R,files:P,setFiles:L})})]}),Object(w.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(w.jsx)(s.a,{label:"Published"}),Object(w.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object(w.jsx)(i.a,{handleProcess:S,processOption:C})})]})]}),Object(w.jsx)(r.a,{id:t,title:"Event",isSubmitting:k})]})})]})}},779:function(e,t,a){"use strict";a.r(t);var n=a(35),r=a(0),c=a(86),l=a(98),s=a(140),i=a(36),o=a(124),d=a(397),u=a(195),b=(a(398),a(187)),j=a(126);function m(e){return"[object Array]"===Object.prototype.toString.call(e)}function p(e,t){if(!e)throw new Error(t)}function g(e){return Object.keys(e)}function h(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function v(e,t,a){var n="."+t,r=new RegExp("(\\".concat(t,")?$"));return a(e).replace(r,n)}function x(e,t,a,n){void 0===a&&(a="download"),void 0===n&&(n=!0);var r=function(e,t,a){switch(t){case"txt":var n="text/plain;charset=utf-8";return a?URL.createObjectURL(new Blob([e],{type:n})):"data:,".concat(n)+encodeURIComponent(e);case"css":return n="text/css;charset=utf-8",a?URL.createObjectURL(new Blob([e],{type:n})):"data:,".concat(n)+encodeURIComponent(e);case"html":return n="text/html;charset=utf-8",a?URL.createObjectURL(new Blob([e],{type:n})):"data:,".concat(n)+encodeURIComponent(e);case"json":return n="text/json;charset=utf-8",a?URL.createObjectURL(new Blob([e],{type:n})):"data:,".concat(n)+encodeURIComponent(e);case"csv":return n="text/csv;charset=utf-8",a?URL.createObjectURL(new Blob([e],{type:n})):"data:,".concat(n)+encodeURIComponent(e);case"xls":return n="text/application/vnd.ms-excel;charset=utf-8",a?URL.createObjectURL(new Blob([e],{type:n})):"data:,".concat(n)+encodeURIComponent(e);case"xml":return n="text/application/xml;charset=utf-8",a?URL.createObjectURL(new Blob([e],{type:n})):"data:,".concat(n)+encodeURIComponent(e);default:return""}}(e,t,n),c=document.createElement("a");c.href=r,c.download=a,c.setAttribute("style","visibility:hidden"),document.body.appendChild(c),c.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!1,view:window})),document.body.removeChild(c)}var f=function(){return f=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},f.apply(this,arguments)},O=function(e,t){var a="function"===typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(n=c.next()).done;)l.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}return l};function y(e){return e.map(h).reduce((function(t,a,n){return a.reduce((function(t,a){var r=O(a,2),c=r[0],l=r[1],s=t[c]||Array.from({length:e.length}).map((function(e){return""}));return s[n]=("string"!==typeof l?JSON.stringify(l):l)||"",t[c]=s,t}),t)}),Object.create(null))}function w(e,t){return void 0===t&&(t=function(e){return e}),t(h(e).map((function(e){var t=O(e,2);return{fieldName:t[0],fieldValues:t[1]}})))}function N(e){var t=/,|"|\n/.test(e)?'"':"",a=e.replace(/"/g,'""');return"".concat(t).concat(a).concat(t)}function C(e,t){if(void 0===t&&(t=function(e){return e}),!e.length)return"";var a='<html>\n  <head>\n    <meta charset="UTF-8" />\n  </head >\n  <body>\n    '.concat(function(e,t){p(e.length>0);var a=w(y(e),t),n=a.map((function(e){return e.fieldName})).join("</b></th><th><b>"),r=a.map((function(e){return e.fieldValues})).map((function(e){return e.map((function(e){return"<td>".concat(e,"</td>")}))})).reduce((function(e,t){return e.map((function(e,a){return"".concat(e).concat(t[a])}))}));return"\n    <table>\n      <thead>\n        <tr><th><b>".concat(n,"</b></th></tr>\n      </thead>\n      <tbody>\n        <tr>").concat(r.join("</tr>\n        <tr>"),"</tr>\n      </tbody>\n    </table>\n  ")}(e,t),"\n  </body>\n</html >\n");return a}function S(e){return'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE base>\n'.concat(U(e,"base"),"\n")}function U(e,t,a,n){void 0===a&&(a="element"),void 0===n&&(n=0);var r,c=(r=t,"555xmlHello .  world!".trim().replace(/^([0-9,;]|(xml))+/,""),r.replace(/[^_a-zA-Z 0-9:\-\.]/g,"").replace(/^([ 0-9-:\-\.]|(xml))+/i,"").replace(/ +/g,"-")),l=function(e){return Array(e+1).join(" ")}(n);if(null===e||void 0===e)return"".concat(l,"<").concat(c," />");var s=m(e)?e.map((function(e){return U(e,a,a,n+2)})).join("\n"):"object"===typeof e?h(e).map((function(e){var t=O(e,2),r=t[0];return U(t[1],r,a,n+2)})).join("\n"):l+"  "+String(e).replace(/([<>&])/g,(function(e,t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return""}}));return"".concat(l,"<").concat(c,">\n").concat(s,"\n").concat(l,"</").concat(c,">")}function E(e){var t=e.data,a=e.fileName,n=void 0===a?"download":a,r=e.extension,c=e.fileNameFormatter,l=void 0===c?function(e){return e.replace(/\s+/,"_")}:c,s=e.fields,i=e.exportType,o=void 0===i?"txt":i,d=e.replacer,u=void 0===d?null:d,b=e.space,j=void 0===b?4:b,U=e.processor,E=void 0===U?x:U,D=e.withBOM,I=void 0!==D&&D,k=e.beforeTableEncode,T=void 0===k?function(e){return e}:k,R="Invalid export data. Please provide an array of objects",P="Can't export unknown data type ".concat(o,"."),L="Can't export string data to ".concat(o,".");if("string"===typeof t)switch(o){case"txt":case"css":case"html":return E(t,o,v(n,null!==r&&void 0!==r?r:o,l));default:throw new Error(L)}var F=function(e){if(!e||m(e)&&!e.length||!m(e)&&!g(e).length)return function(e){return e};var t=m(e)?e.reduce((function(e,t){var a;return f(f({},e),((a={})[t]=t,a))}),Object.create(null)):e;return function(e){return m(e)?e.map((function(e){return h(e).reduce((function(e,a){var n=O(a,2),r=n[0],c=n[1];return r in t&&(e[t[r]]=c),e}),Object.create(null))})).filter((function(e){return g(e).length})):h(e).reduce((function(e,a){var n=O(a,2),r=n[0],c=n[1];return r in t&&(e[t[r]]=c),e}),Object.create(null))}}(s),B=F(function(t){try{return"string"===typeof t?JSON.parse(t):t}catch(e){throw new Error("Invalid export data. Please provide a valid JSON")}}(t)),A=function(t,a,n){void 0===a&&(a=null);try{return JSON.stringify(t,a,n)}catch(e){throw new Error("Invalid export data. Please provide valid JSON object")}}(B,u,j);switch(o){case"txt":case"css":case"html":return E(A,o,v(n,null!==r&&void 0!==r?r:o,l));case"json":return E(A,o,v(n,null!==r&&void 0!==r?r:"json",l));case"csv":p(m(B),R);var M=function(e,t){if(void 0===t&&(t=function(e){return e}),!e.length)return"";var a=w(y(e),t);return a.map((function(e){return e.fieldName})).join(",")+"\r\n"+a.map((function(e){return e.fieldValues})).map((function(e){return e.map(N)})).reduce((function(e,t){return e.map((function(e,a){return"".concat(e,",").concat(t[a])}))})).join("\r\n")}(B,T);return E(I?"\ufeff"+M:M,o,v(n,null!==r&&void 0!==r?r:"csv",l));case"xls":return p(m(B),R),E(C(B,T),o,v(n,null!==r&&void 0!==r?r:"xls",l));case"xml":return E(S(B),o,v(n,null!==r&&void 0!==r?r:"xml",l));default:throw new Error(P)}}E.types={txt:"txt",css:"css",html:"html",json:"json",csv:"csv",xls:"xls",xml:"xml"},E.processors={downloadFile:x};a(385),a(3),a(200),a(194);var D=a(1);a(201);var I=a(392);var k=a(22),T=a(198),R=a(393),P=a(394),L=(a(162),a(143)),F=a.n(L),B=a(249);var A=e=>{let{data:t,lang:a,isCheck:r,events:c,setIsCheck:s,useParamId:i}=e;const{title:d,serviceId:b,handleModalOpen:m,handleUpdate:p}=Object(o.a)();return Object(D.jsxs)(D.Fragment,{children:[(null===r||void 0===r?void 0:r.length)<1&&Object(D.jsx)(u.a,{useParamId:i,id:b,title:d}),Object(D.jsx)(j.a,{children:Object(D.jsx)(T.a,{id:b,data:t,lang:a})}),Object(D.jsx)(n.TableBody,{children:null===t||void 0===t?void 0:t.map((e=>Object(D.jsxs)(n.TableRow,{children:[Object(D.jsx)(n.TableCell,{children:null!==e&&void 0!==e&&e.image?Object(D.jsx)(n.Avatar,{className:"hidden mr-3 md:block bg-gray-50 p-1",src:"https://api.darbengacem.com/uploads/"+e.image,alt:null===e||void 0===e?void 0:e.image}):Object(D.jsx)(n.Avatar,{src:"https://res.cloudinary.com/ahossain/image/upload/v1655097002/placeholder_kvepfp.png",alt:"event",className:"hidden p-1 mr-2 md:block bg-gray-50 shadow-none"})}),Object(D.jsx)(n.TableCell,{className:"text-sm",children:null===e||void 0===e?void 0:e.title}),Object(D.jsx)(n.TableCell,{className:"text-sm",children:F()(null===e||void 0===e?void 0:e.startDate).format("MM/D/YYYY HH:mm")}),Object(D.jsx)(n.TableCell,{className:"text-sm",children:null===e||void 0===e?void 0:e.location}),Object(D.jsx)(n.TableCell,{className:"text-center",children:Object(D.jsx)(R.a,{id:e._id,category:!0,status:e.isPublished})}),Object(D.jsx)(n.TableCell,{children:Object(D.jsxs)("div",{className:"flex justify-end items-center",children:[Object(D.jsx)(k.b,{to:"/events/".concat(null===e||void 0===e?void 0:e._id),className:"p-2 text-gray-400 hover:text-green-600",children:Object(D.jsx)(B.a,{id:"view",Icon:l.i,title:"View details",bgColor:"#10B981"})}),Object(D.jsx)(P.a,{id:null===e||void 0===e?void 0:e._id,parent:e,isCheck:r,children:null===e||void 0===e?void 0:e.children,handleUpdate:p,handleModalOpen:m,title:(null===e||void 0===e?void 0:e.title)||"event"})]})})]},e._id)))})]})},M=a(399),Y=a(125);t.default=()=>{const{toggleDrawer:e,lang:t}=Object(r.useContext)(i.a),{data:a,loading:m}=Object(s.a)(Y.a.getAllEvents),{handleDeleteMany:p,allId:g,handleUpdateMany:h,serviceId:v}=Object(o.a)(),{t:x}=Object(c.a)(),{handleSubmitCategory:f,categoryRef:O,totalResults:y,resultsPerPage:w,dataTable:N,serviceData:C,handleChangePage:S,filename:U,isDisabled:E,handleSelectFile:k,handleUploadMultiple:R,handleRemoveSelectFile:P,searchRef:L}=Object(d.a)(a?a.data:[]),[F,B]=Object(r.useState)(!1),[_,J]=Object(r.useState)([]),[H,V]=Object(r.useState)(!1);return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(b.a,{children:"Event"}),Object(D.jsx)(u.a,{ids:g,setIsCheck:J}),Object(D.jsx)(j.a,{children:Object(D.jsx)(T.a,{id:v,data:a,lang:t})}),Object(D.jsx)(n.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 rounded-t-lg rounded-0 mb-4",children:Object(D.jsx)(n.CardBody,{children:Object(D.jsxs)("form",{onSubmit:f,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[Object(D.jsx)("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:Object(D.jsx)(n.Input,{ref:L,type:"search",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",placeholder:"Search Events By Title"})}),Object(D.jsx)("div",{className:"w-full md:w-48 lg:w-48 xl:w-48",children:Object(D.jsxs)(n.Button,{onClick:e,className:"rounded-md h-12 w-full",children:[Object(D.jsx)("span",{className:"mr-2",children:Object(D.jsx)(l.c,{})}),"Add Event"]})})]})})}),m?Object(D.jsx)(I.a,{row:12,col:6,width:190,height:20}):0!==(null===C||void 0===C?void 0:C.length)?Object(D.jsxs)(n.TableContainer,{className:"mb-8",children:[Object(D.jsxs)(n.Table,{children:[Object(D.jsx)(n.TableHeader,{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)(n.TableCell,{children:"Image"}),Object(D.jsx)(n.TableCell,{children:"Title"}),Object(D.jsx)(n.TableCell,{children:"Start Date"}),Object(D.jsx)(n.TableCell,{children:"Location"}),Object(D.jsx)(n.TableCell,{className:"text-center",children:"Published"}),Object(D.jsx)(n.TableCell,{className:"text-right",children:"Actions"})]})}),Object(D.jsx)(A,{data:a.data,lang:t,isCheck:_,categories:N,setIsCheck:J,showChild:H})]}),Object(D.jsx)(n.TableFooter,{children:Object(D.jsx)(n.Pagination,{totalResults:y,resultsPerPage:w,onChange:S,label:"Table navigation"})})]}):Object(D.jsx)(M.a,{title:"Sorry, There are no categories right now."})]})}}}]);
//# sourceMappingURL=10.0d95ed22.chunk.js.map